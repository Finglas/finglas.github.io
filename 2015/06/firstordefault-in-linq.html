<!DOCTYPE html>
<html lang="english">
<head>
        <meta charset="utf-8" />
        <title>Shaun Finglas - FirstOrDefault in LINQ</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/posts/default.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Atom Feed" />

        <link rel="icon" type="image/png" sizes="32x32" href="/theme/images/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/theme/images/favicons/favicon-16x16.png">
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Shaun Finglas</a></h1>
 <h2>Agile software development &amp; programming - one lesson at a time.</h2>                <nav><ul>
                    <li><a href="/pages/about.html">About Me</a></li>
                    <li><a href="/pages/series.html">Series</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2015/06/firstordefault-in-linq.html" rel="bookmark"
           title="Permalink to FirstOrDefault in LINQ">FirstOrDefault in LINQ</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-06-01T00:00:00+02:00">
                Published: Mon 01 June 2015
        </abbr>

<p>tags: <a href="/tag/programming.html">programming</a> <a href="/tag/tutorial.html">tutorial</a> </p>
</footer><!-- /.post-info -->      <p>Explicit null checking is a code smell in most cases. It should be
limited where possible, or pushed to the edge of the system. A common
anti pattern I've noticed is the incorrect use of <code>First()</code> in LINQ,
which I have used myself on many occasions in this manner.</p>
<p>Assuming a collection of items that you wish to query, the incorrect
approach is to explicitly check for a null return value and act
accordingly.</p>
<script src="https://gist.github.com/Finglas/0ab1ace9e1d582047485.js"></script>

<p>The use of <code>FirstOrDefault()</code> is redundant because no default is
actually set. The default value of a reference type would be null.
Meaning the explicit null checked is required. We could use <code>First()</code>
alone, but this will throw an exception if there are no elements to
query against.</p>
<p>A better solution is to set the default. As long as our initial query is
not operating on a null reference this is safe. Here the explicit null
check is gone. We have replaced it with a more functional solution which
is after all what LINQ is based upon. While both are equivalent, the
second example is much cleaner as well as being open to further chained
statements.</p>
<script src="https://gist.github.com/Finglas/f8622201f6cd44af138d.js"></script>

<p><code>First()</code> relies on one or more items being in the sequence. When you
are only ever dealing with one result <code>Single()</code> is more appropriate.
This method will throw an exception if more than one result is found,
acting as a form of assertion. Like <code>First()</code>, <code>Single()</code> offers
<code>SingleOrDefault()</code> which would work in the same manner as above.</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <ul>
                            <li><a href="/feeds/posts/default.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/ShaunFinglas">Twitter</a></li>
                            <li><a href="https://github.com/Finglas">Github</a></li>
                            <li><a href="https://www.linkedin.com/in/shaunfinglas/">LinkedIn</a></li>
                            <li><a href="https://stackoverflow.com/users/102482/finglas">StackOverflow</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>Proudly powered by <a href="http://getpelican.com/">Pelican</a>. Theme based on <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>.</p>
                <p id="disclaimer">Disclaimer: The posts on this site are my own and don't necessarily represent my employers positions, strategies, or opinions.</p>
                <p>Copyright &copy; Shaun Finglas 2017</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-68423049-2', 'auto');
    ga('send', 'pageview');
    </script>
</body>
</html>