<!DOCTYPE html>
<html lang="en">
<head>
          <title>Shaun Finglas</title>
        <meta charset="utf-8" />
        <link href="https://blog.shaunfinglas.co.uk/feeds/posts/default.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Full Atom Feed" />
        <link href="https://blog.shaunfinglas.co.uk/feeds/2014.atom.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Categories Atom Feed" />


    <meta name="tags" content="testing" />
    <meta name="tags" content="retro" />

        <link rel="shortcut icon" type="image/x-icon" href="../../theme/favicon.ico">
        <link rel="stylesheet" href="../../theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../../">Shaun Finglas <strong>- Programming</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu">
          <ul>
            <li><a href="../../pages/about.html">About</a></li>
            <li><a href="../../pages/series.html">Series</a></li>
            <li><a href="../../archives.html">Archives</a></li>
          </ul>
        </nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="../../2014/08/acceptance-testing-need-not-use-full.html" rel="bookmark"
         title="Permalink to Acceptance Testing need not use the Full Stack">Acceptance Testing need not use the Full Stack</a></h2>
 
  </header>
  <div class="entry-content">
    <ul>
<li>Joined a team with thousands of unit tests (\~10k)</li>
<li>But bugs still got through our QA process</li>
<li>How could this be?</li>
<li>Team had a small number of full end to end live service tests</li>
<li>So my answer was to just increase the number of these</li>
<li>Surely this would solve our problem?</li>
<li>Not quite</li>
<li>The maintenance of these tests were a great burden</li>
<li>Each day many tests would fail, but nothing would be "broken".</li>
<li>Data would have changed in the DB</li>
<li>The UI could have changed</li>
<li>The browser could have been slightly slower</li>
<li>And so on</li>
</ul>
<h4>Solution</h4>
<ul>
<li>Delete the majority of live service tests - limit the tests to the
    core user journey through the application</li>
<li>As long as the pages load up, without an error we shouldn't care</li>
<li>Stopped testing logic or behaviour - made the tests loose, e.g. as
    long as value is not null or empty we are OK, we don't actually care
    what the value is.</li>
<li>Made use of <a href="http://martinfowler.com/bliki/IntegrationContractTest.html">contract
    testing</a>
    to substitute boundaries with in memory fakes, e.g. persistent
    storage. This allowed fast, stable acceptance tests to be run
    against the system without the brittle nature described above.</li>
</ul>
<h5>Benefits</h5>
<ul>
<li>Small handful of live service tests (using real DB, UI) caught the
    majority of the serious flaws that snuck through</li>
<li>Future bugs were missing unit tests thanks to contract testing</li>
<li>Faster to write</li>
<li>Easier to debug</li>
<li>Faster to execute!</li>
</ul>
<p>The key point was the use of contract testing. Without contract testing,
writing automated acceptance tests is a pretty awful process.</p>
<p>Data requires setup and tear down. Any data changes can break your tests
and the UI is often in flux.</p>
<p>By substituting the UI layer, or the DB access with fakes such as a
console view, or in memory hash table, your tests can still cover the
whole stack, but in a more stable, bite size manner. You simply test
your real view or data access separately to prove they work, and can in
fact be swapped out thanks to the <a href="http://en.wikipedia.org/wiki/Liskov_substitution_principle">Liskov Substitution Principle
(LSP</a>) by
running the same suite of tests against your fakes!</p>
<p>I'll be expanding on how and what contract testing is in a future post.</p>
  </div><!-- /.entry-content -->
  <footer class="post-info">
    <time class="published" datetime="2015-02-10T20:15:00+01:00">
      Tue 10 February 2015
    </time>
    <address class="vcard author">
      By Shaun Finglas
    </address>
  </footer><!-- /.post-info -->
</section>
        <footer id="contentinfo" class="body">
                <p>Disclaimer: The posts on this site are my own and don't necessarily represent my employers positions, strategies, or opinions.</p>
                <p>Copyright Â© Shaun Finglas 2019</p><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>