<!DOCTYPE html>
<html lang="en">
<head>
          <title>Shaun Finglas</title>
        <meta charset="utf-8" />
        <link href="https://blog.shaunfinglas.co.uk/feeds/posts/default.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Full Atom Feed" />
        <link href="https://blog.shaunfinglas.co.uk/feeds/2015.atom.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Categories Atom Feed" />


    <meta name="tags" content="testing" />
    <meta name="tags" content="contracts" />
    <meta name="tags" content="unit-testing" />

        <link rel="shortcut icon" type="image/x-icon" href="../../theme/favicon.ico">
        <link rel="stylesheet" href="../../theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../../">Shaun Finglas <strong>- Programming</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu">
          <ul>
            <li><a href="../../pages/about.html">About</a></li>
            <li><a href="../../pages/series.html">Series</a></li>
            <li><a href="../../archives.html">Archives</a></li>
          </ul>
        </nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="../../2015/07/the-benefits-of-contract-testing.html" rel="bookmark"
         title="Permalink to The Benefits of Contract Testing">The Benefits of Contract Testing</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2015-07-01T00:00:00+02:00">
      Wed 01 July 2015
    </time>
    <address class="vcard author">
      By Shaun Finglas
    </address>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p><a href="https://blog.shaunfinglas.co.uk/2015/07/integration-tests.html">I previously claimed that you need some integrated tests but as few as
possible</a>.
There are huge benefits to this approach, but there is a problem. How do
you stop your test doubles falling out of line with the real
implementations? The answer is to use Contract Tests.</p>
<h4>Steps</h4>
<ol>
<li>Create a base test fixture, this is where your tests live. All
    assertions belong here.</li>
<li>Subclass this base class with each implementation.</li>
<li>Override each setup step to provide the implementation that is to be
    tested.</li>
<li>All tests should pass for each instance.</li>
</ol>
<h4>Example</h4>
<p>In this example there is a SQL repository and an in memory repository.
It is not possible to change either in any manner that causes them to
behave differently. We can safely use the in memory repository for
tests, with confidence that the test double matches the contract of the
real implementation.</p>
<script src="https://gist.github.com/Finglas/63a042dd2a20487410ab.js"></script>

<p>The test double implementations can be executed on every test run. While
real implementations can be relegated to execution prior to commit or
during continuous integration. This trade off allows for fast feedback
cycles while ensuring all tests are run against production like
implementations.</p>
<h4>References</h4>
<ul>
<li><a href="http://blog.thecodewhisperer.com/2009/10/08/who-tests-the-contract-tests/">Contract
    Tests</a></li>
<li><a href="https://github.com/arlobelshee/ArsEditorExample/blob/master/SimulatableApi.Tests/FileSystemCanLocateFilesAndDirs.cs">No Mocks
    Example</a></li>
</ul>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <p>Disclaimer: The posts on this site are my own and don't necessarily represent my employers positions, strategies, or opinions.</p>
                <p>Copyright Â© Shaun Finglas 2019</p><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>