<!DOCTYPE html>
<html lang="english">
<head>
        <meta charset="utf-8" />
        <title>Shaun Finglas - 2010</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/posts/default.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Atom Feed" />

        <link rel="icon" type="image/png" sizes="32x32" href="/theme/images/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/theme/images/favicons/favicon-16x16.png">
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Shaun Finglas</a></h1>
 <h2>Agile software development &amp; programming - one lesson at a time.</h2>                <nav><ul>
                    <li><a href="/pages/about.html">About Me</a></li>
                    <li><a href="/pages/series.html">Series</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/2010/12/lists-or-objects.html">Lists or Objects</a></h1>
<footer class="post-info">
        <abbr class="published" title="2010-12-01T00:00:00+01:00">
                Published: Wed 01 December 2010
        </abbr>

<p>tags: <a href="/tag/code-quality.html">code-quality</a> <a href="/tag/programming.html">programming</a> </p>
</footer><!-- /.post-info --><blockquote>
<p>"Our rule of thumb is that we try to limit passing around types with
generics (the types closed in angle brackets). Particularly when
applied to collections, we view it as a form of duplication. It's a
hint that there's a domain concept that should be extracted into a
type." [<a href="http://www.growing-object-oriented-software.com/">Growing Object-Oriented Software, Guided by
Tests</a> - Steve
Freeman, Nat Pryce, page 136)]</p>
</blockquote>
<h3>Example</h3>
<p>Not ideal - business logic will leak.</p>
<script src="https://gist.github.com/Finglas/24ed5ead118ea8e2730c.js"></script>

<p>Better - quotes are now encapsulated.</p>
<script src="https://gist.github.com/Finglas/ed5e69d1e10925e7a4dd.js"></script>

<h3>Why?</h3>
<p>The benefit of the second approach is that you begin to force the
collection to do the work. Consider a collection of quotes - using the
first approach a developers' typical instinct would be to loop over the
list and check each quote until the lowest quote was found. You could
argue that this in turn violates the '<a href="http://www.pragprog.com/articles/tell-dont-ask">Tell Don't
Ask</a>' principle because
very quickly you can find yourself digging down into objects. We would
not do this with standalone objects, so collections should not be any
different. Yet as developers we often avoid creating objects to
encapsulate collections, despite this principle being taught in the
early chapters of any OO programming beginners book.</p>
<p>Another key point of encapsulating collections is that you reduce
duplication. If another part of the application needs to perform a check
for the lowest quote, you'd end up either duplicating the code to loop
over the quotes, or creating a helper method to do the actual
processing. Using the collection means such features are only a method
call away at all times.</p>
<p>In a recent <a href="http://codekata.com/kata/kata09-back-to-the-checkout/">code
kata</a> as well as
a current set of work, we are applying some of the above concepts and
finding a dramatic increase in the quality of our code. Those of you may
have noticed that the above implementation inherits from a standard
list, therefore it is indeed possible to still violate encapsulation and
dig through the collection yourself. There are pros and cons to this
approach, one benefit is all of the out of the box functionality you get
for free - the ability to loop over the quotes (for displaying say) and
return a count for example. The downside being developers can treat
these collections as if they were a list.</p>
<p>In C# it is possible to use
<a href="http://msdn.microsoft.com/en-us/library/aa288465%28v=vs.71%29.aspx">indexers</a>or
interfaces to improve the above implementation, though we tend to agree
that it's up to the developers to do the "right" thing - in other words,
not dive down into the collection. Interesting this very topic has been
<a href="http://stackoverflow.com/questions/21715/listbusinessobject-or-businessobjectcollection">discussed on the excellent
StackOverflow</a>
- I and others will sure agree that the answer(s) provided are well off
the mark. Encapsulate your public collections - do not treat them as
primitives!</p>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="social">
                        <ul>
                            <li><a href="/feeds/posts/default.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/ShaunFinglas">Twitter</a></li>
                            <li><a href="https://github.com/Finglas">Github</a></li>
                            <li><a href="https://www.linkedin.com/in/shaunfinglas/">LinkedIn</a></li>
                            <li><a href="https://stackoverflow.com/users/102482/finglas">StackOverflow</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>Proudly powered by <a href="http://getpelican.com/">Pelican</a>. Theme based on <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>.</p>
                <p id="disclaimer">Disclaimer: The posts on this site are my own and don't necessarily represent my employers positions, strategies, or opinions.</p>
                <p>Copyright &copy; Shaun Finglas 2017</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-68423049-2', 'auto');
    ga('send', 'pageview');
    </script>
</body>
</html>