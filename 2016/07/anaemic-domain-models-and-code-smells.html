<!DOCTYPE html>
<html lang="en">
<head>
          <title>Shaun Finglas</title>
        <meta charset="utf-8" />
        <link href="https://blog.shaunfinglas.co.uk/feeds/posts/default.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Full Atom Feed" />
        <link href="https://blog.shaunfinglas.co.uk/feeds/2016.atom.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Categories Atom Feed" />


    <meta name="tags" content="programming" />

        <link rel="stylesheet" href="../../theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../../">Shaun Finglas <strong>Tech Blog</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="../../pages/about.html">About Me</a></li>
            <li><a href="../../pages/series.html">Series</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="../../2016/07/anaemic-domain-models-and-code-smells.html" rel="bookmark"
         title="Permalink to Anaemic Domain Models and Code Smells">Anaemic Domain Models and Code Smells</a></h2>
 
  </header>
  <div class="entry-content">
    <p>An anaemic domain model (ADM) is considered a code smell in many cases.
An ADM is present when you have a entity representing your domain, but
void of any behaviour. Any logic is separate and operated upon in
isolation. Such domain models can be thought of as simple property bags,
plain old language objects or DTO's.</p>
<h4>Code Smells</h4>
<p>With an ADM your behaviour ends up split across many domain services
instead of being grouped with the data it operates upon.</p>
<p>As the domain and your understanding evolves, the problem an ADM
introduces can get worse as more and more domain services are added.</p>
<p>A complex domain or one that evolves will end up paying a price.
Converting to and from what looks like a domain model, only to perform
domain logic separately is quite redundant. Why not ditch the domain
model altogether? If you have a simple problem, a simple solution such
as a transaction script may very well do the job.</p>
<h4>Simple Problems - Simple Solutions</h4>
<p>Sometimes you don't have a complex domain. Input, basic logic, then some
form of CRUD is incredibly common. Due to this it is easy to see why
anaemic models exist.</p>
<p>Rather than the cost associated with attempting to model the domain,
choose easier solutions such as transaction scripts, table gateways or
similar.</p>
<p>The big argument for anaemic domain models is following the SRP. Adding
behaviour to domain models does not violate SRP. There is no reason why
such additions cannot be formed from composition or delegation. Likewise
the internal representation can be private. On the flip side domain
services operating under the disguise of SRP lack cohesion, despite
<em>doing one thing</em>.</p>
<p>The good news is that the ADM is very easy to extend and refactor at a
later point. <a href="https://vimeo.com/43598193">Moving to a richer domain model is not
difficult</a>, though the process may take
time.</p>
<h4>Refactoring from an ADM</h4>
<p>Simply push behaviour onto entities, one method at a time. As you do
this, services will begin to dissolve. All of this can be done when
supported by a good suite of tests.</p>
<p>An <a href="https://blog.shaunfinglas.co.uk/2015/02/value-object-refactoring.html">equally simple step is to being introducing value
types</a>.
Over time these will act as code magnets pulling any related behaviour
towards them.</p>
<h4>Lessons</h4>
<ul>
<li>In most cases an ADM is a code smell.</li>
<li>There may be easier solutions than a anaemic model that mimics your
    domain.</li>
<li>The ADM is not a good example of SRP.</li>
<li>Refactoring towards a rich domain model is easy and achievable at
    any stage.</li>
</ul>
  </div><!-- /.entry-content -->
  <footer class="post-info">
    <time class="published" datetime="2016-07-01T00:00:00+02:00">
      Fri 01 July 2016
    </time>
    <address class="vcard author">
      By Shaun Finglas
    </address>
  </footer><!-- /.post-info -->
</section>
        <footer id="contentinfo" class="body">
                <p>Disclaimer: The posts on this site are my own and don't necessarily represent my employers positions, strategies, or opinions.</p>
                <p>Copyright Â© Shaun Finglas 2019</p><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>