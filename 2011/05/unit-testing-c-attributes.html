<!DOCTYPE html>
<html lang="english">
<head>
        <meta charset="utf-8" />
        <title>Shaun Finglas - Unit Testing C# attributes</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/posts/default.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Atom Feed" />

        <link rel="icon" type="image/png" sizes="32x32" href="/theme/images/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/theme/images/favicons/favicon-16x16.png">
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Shaun Finglas</a></h1>
 <h2>Agile software development &amp; programming - one lesson at a time.</h2>                <nav><ul>
                    <li><a href="/pages/about.html">About Me</a></li>
                    <li><a href="/pages/series.html">Series</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2011/05/unit-testing-c-attributes.html" rel="bookmark"
           title="Permalink to Unit Testing C# attributes">Unit Testing C# attributes</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2011-05-01T00:00:00+02:00">
                Published: Sun 01 May 2011
        </abbr>

<p>tags: <a href="/tag/testing.html">testing</a> </p>
</footer><!-- /.post-info -->      <p>For a recent coding session I needed to handle an exception being thrown
when some Json was incorrectly bound to a view model. With the framework
we were using (<a href="http://www.asp.net/mvc" title="ASP.NET MVC2">ASP.NET</a> MVC2) I
was unable to handle the exception at the controller level, nor could I
handle it at the "global" level when the framework carries out its
bindings. Another way ASP.NET MVC handles <a href="http://msdn.microsoft.com/en-us/library/system.web.mvc.handleerrorattribute.aspx">exceptions is via
attributes</a>
to catch errors you specify. The resulting exception is strongly typed
and then can be passed into a view, from which you have full control of
what to do. Typically we would log the error, display a friendly message
and so forth.</p>
<p>In the past these attributes have been simply applied without a test -
the general consensus being this was a framework specific thing which
had no value in being tested. I agreed with those statements up until
several minutes ago. Having fixed a defect in which the user was not
seeing a friendly error message I carried on with a new feature only to
find somehow the error handling had broken. It turned out I had indeed
broken the attribute by providing an incorrect parameter.</p>
<p>As luck would have it there is a very nice, quick way to <a href="http://stackoverflow.com/questions/2007434/how-to-nunit-test-for-a-methods-attribute-existance">unit test
attributes as discussed on
StackOverflow</a>.
In the end I created several tests to check the following:</p>
<ul>
<li>The type of the attribute is correct</li>
<li>The attributes properties were correctly set</li>
</ul>
<p>The tests ended up ensuring that my action does indeed handle certain
exceptions, redirecting the user to the correct view. The nice thing
about these tests are they will only take minutes to write next time,
yet save me a long time figuring out why the error handling has broken.
Plus being unit tests they execute in the blink of an eye, no need to
write a regression test to check the redirection has been carried out.
These tests are therefore more "documentation" of how the system should
behave.</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <ul>
                            <li><a href="/feeds/posts/default.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/ShaunFinglas">Twitter</a></li>
                            <li><a href="https://github.com/Finglas">Github</a></li>
                            <li><a href="https://www.linkedin.com/in/shaunfinglas/">LinkedIn</a></li>
                            <li><a href="https://stackoverflow.com/users/102482/finglas">StackOverflow</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>Proudly powered by <a href="http://getpelican.com/">Pelican</a>. Theme based on <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>.</p>
                <p id="disclaimer">Disclaimer: The posts on this site are my own and don't necessarily represent my employers positions, strategies, or opinions.</p>
                <p>Copyright &copy; Shaun Finglas 2017</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-68423049-2', 'auto');
    ga('send', 'pageview');
    </script>
</body>
</html>