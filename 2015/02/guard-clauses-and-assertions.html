<!DOCTYPE html>
<html lang="en">
<head>
          <title>Shaun Finglas</title>
        <meta charset="utf-8" />
        <link href="https://blog.shaunfinglas.co.uk/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Full Atom Feed" />
        <link href="https://blog.shaunfinglas.co.uk/feeds/2015.atom.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Categories Atom Feed" />


    <meta name="tags" content="code-quality" />
    <meta name="tags" content="tutorial" />

        <link rel="stylesheet" href="https://blog.shaunfinglas.co.uk/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://blog.shaunfinglas.co.uk/">Shaun Finglas <strong>Tech Blog</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="https://blog.shaunfinglas.co.uk/pages/about.html">About Me</a></li>
            <li><a href="https://blog.shaunfinglas.co.uk/pages/series.html">Series</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://blog.shaunfinglas.co.uk/2015/02/guard-clauses-and-assertions.html" rel="bookmark"
         title="Permalink to Guard Clauses and Assertions">Guard Clauses and Assertions</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2015-02-01T00:00:00+01:00">
      Sun 01 February 2015
    </time>
    <address class="vcard author">
      By Shaun Finglas
    </address>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>Two simple techniques to increase code quality, resilience, and ease
debugging scenarios is to use guard clauses effectively and ensure that
assertions are used liberally.</p>
<h4>Guard Clauses</h4>
<ul>
<li>Any public method should perform guard clauses to ensure pre
    conditions are met.</li>
<li>Ensures the code's invariants are not broken.</li>
<li>Throw exceptions, because these are exceptional issues.</li>
<li>Developer and user assistance as it is possible for these clauses to
    fail at runtime.</li>
</ul>
<script src="https://gist.github.com/Finglas/5b784bd2782d1478fa40.js"></script>

<p>Here we enforce that any <code>PersonalDetails</code> instance has a forename and
surname. A forename must also be at least one character long. As long as
these conditions are met, we finally assign the values internally. Guard
clauses should also be used on dependencies that are services, checking
that a service is not a null instance for example.</p>
<h4>Assertions</h4>
<ul>
<li>Used within private methods/functions where required.</li>
<li>Should be used for situations that should never happen, e.g the
    presence of a bug or invalid scenario.</li>
<li>Developer only assistance, the user should never see these ideally
    because automated/manual testing should have detected them.</li>
<li>Usually removed for release builds, though open to debate, best to
    judge on context. Is it better for the program to crash and inform
    the user, or carry on in an invalid state?</li>
<li>Great for documenting assumptions, e.g. code a level above ensures
    object is in a certain state.</li>
</ul>
<script src="https://gist.github.com/Finglas/2a59051e9c3d566185f1.js"></script>

<p>While this method is private, we have essentially stated that we take no
responsibility for validating that a name has been provided. This is the
concern of another part of the code (the constructor in this case).
However this simple assert statement means that if the method is used in
a different manner, it will fail spectacularly at runtime. This will
point at the incorrect use of the method and allow the developer to make
the required changes.</p>
<h5>Summary</h5>
<p>Code quality will improve because less invalid scenarios should be
allowed to happen. Due to clauses and assertions always being present
they go hand in hand with automated tests, often catching scenarios that
automated tests may miss. Debugging is easier because the stack trace
points you at the source of the problem, rather than an initial problem
hidden in layers of exceptions caused by invalid state. While applying
clauses and assertions increases lines of code, they are easy to
implement, and the return on investment is high. There are no excuses
not to use them.</p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <p>Disclaimer: The posts on this site are my own and don't necessarily represent my employers positions, strategies, or opinions.</p>
                <p>Copyright Â© Shaun Finglas 2019</p><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>