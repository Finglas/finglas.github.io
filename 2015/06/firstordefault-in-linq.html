<!DOCTYPE html>
<html lang="en">
<head>
          <title>Shaun Finglas</title>
        <meta charset="utf-8" />
        <link href="https://blog.shaunfinglas.co.uk/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Full Atom Feed" />
        <link href="https://blog.shaunfinglas.co.uk/feeds/2015.atom.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Categories Atom Feed" />


    <meta name="tags" content="programming" />
    <meta name="tags" content="tutorial" />

        <link rel="stylesheet" href="https://blog.shaunfinglas.co.uk/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://blog.shaunfinglas.co.uk/">Shaun Finglas <strong>Tech Blog</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="https://blog.shaunfinglas.co.uk/pages/about.html">About Me</a></li>
            <li><a href="https://blog.shaunfinglas.co.uk/pages/series.html">Series</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://blog.shaunfinglas.co.uk/2015/06/firstordefault-in-linq.html" rel="bookmark"
         title="Permalink to FirstOrDefault in LINQ">FirstOrDefault in LINQ</a></h2>
 
  </header>
  <div class="entry-content">
    <p>Explicit null checking is a code smell in most cases. It should be
limited where possible, or pushed to the edge of the system. A common
anti pattern I've noticed is the incorrect use of <code>First()</code> in LINQ,
which I have used myself on many occasions in this manner.</p>
<p>Assuming a collection of items that you wish to query, the incorrect
approach is to explicitly check for a null return value and act
accordingly.</p>
<script src="https://gist.github.com/Finglas/0ab1ace9e1d582047485.js"></script>

<p>The use of <code>FirstOrDefault()</code> is redundant because no default is
actually set. The default value of a reference type would be null.
Meaning the explicit null checked is required. We could use <code>First()</code>
alone, but this will throw an exception if there are no elements to
query against.</p>
<p>A better solution is to set the default. As long as our initial query is
not operating on a null reference this is safe. Here the explicit null
check is gone. We have replaced it with a more functional solution which
is after all what LINQ is based upon. While both are equivalent, the
second example is much cleaner as well as being open to further chained
statements.</p>
<script src="https://gist.github.com/Finglas/f8622201f6cd44af138d.js"></script>

<p><code>First()</code> relies on one or more items being in the sequence. When you
are only ever dealing with one result <code>Single()</code> is more appropriate.
This method will throw an exception if more than one result is found,
acting as a form of assertion. Like <code>First()</code>, <code>Single()</code> offers
<code>SingleOrDefault()</code> which would work in the same manner as above.</p>
  </div><!-- /.entry-content -->
  <footer class="post-info">
    <time class="published" datetime="2015-06-01T00:00:00+02:00">
      Mon 01 June 2015
    </time>
    <address class="vcard author">
      By Shaun Finglas
    </address>
  </footer><!-- /.post-info -->
</section>
        <footer id="contentinfo" class="body">
                <p>Disclaimer: The posts on this site are my own and don't necessarily represent my employers positions, strategies, or opinions.</p>
                <p>Copyright Â© Shaun Finglas 2019</p><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>