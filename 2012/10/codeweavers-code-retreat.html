<!DOCTYPE html>
<html lang="en">
<head>
          <title>Shaun Finglas</title>
        <meta charset="utf-8" />
        <link href="https://blog.shaunfinglas.co.uk/feeds/posts/default.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Full Atom Feed" />
        <link href="https://blog.shaunfinglas.co.uk/feeds/2012.atom.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Categories Atom Feed" />


    <meta name="tags" content="programming" />

        <link rel="stylesheet" href="../../theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../../">Shaun Finglas <strong>Tech Blog</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="../../pages/about.html">About Me</a></li>
            <li><a href="../../pages/series.html">Series</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="../../2012/10/codeweavers-code-retreat.html" rel="bookmark"
         title="Permalink to Codeweavers Code Retreat">Codeweavers Code Retreat</a></h2>
 
  </header>
  <div class="entry-content">
    <p>Last week we had <a href="https://twitter.com/kevinrutherford">@kevinrutherford</a>
in to run a coderetreat. It was the first retreat I've taken part in
personally, the same applying to much of the team. The day was to focus
on one challenge - <strong><a href="http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Conway's Game of
Life</a></strong> though
each iteration would introduce new constraints.</p>
<h2>Iteration 1</h2>
<p>The four <a href="http://c2.com/cgi/wiki?XpSimplicityRules">rules of simple
code</a> were discussed, aka
"Extreme Normal Form".</p>
<ol>
<li>Passes tests</li>
<li>Communicates intent</li>
<li>No duplication</li>
<li>Nothing unncessary</li>
</ol>
<p>Our first run through was somewhat of a disaster. We became too obsessed
with how the grid was to be stored. This meant we spent a long time
messing around with arrays and multidemionsal arrays in C#. Both are
somewhat tedious and not something we use often, therefore we concluded
a more "grid agnostic" approach would be needed. After all, there is
nothing stating the grid need be a square, fixed layout.</p>
<h2>Iteration 2</h2>
<p>The concept of <a href="http://c2.com/cgi/wiki?ArrangeActAssert">Arrange, Act,
Assert</a> or AAA was discussed.</p>
<ul>
<li>Arrange - set up pre conditions</li>
<li>Act - do something on the subject under test</li>
<li>Assert - verify or check some result</li>
</ul>
<p>The constraint during this iteration was that all asserts were to be
created first, and we would work backwards. Personally I found this
difficult, both mentally and in terms of tooling. For the past four
years I've rarely wrote an assert first, therefore this switch proved
tricky.</p>
<p>Visual Studio and Resharper also tend to favour a top down approach. In
other words, it's easier to stub out a class and add methods, rather
than the inverse.</p>
<p>New members to the team found the act of writing the assert first much
easier however, and they're looking to continue this in day to day
development.</p>
<p>The point I took from here is that while I may personally know what I'm
writing, my partner might not be aware of where we are heading. Starting
with the assert first allows both developers to see the goal for that
particular test.</p>
<h2>Iteration 3</h2>
<p>Our third iteration introduced the unrealistic concept of mute pairing.
Only the code and tests can reveal our intent.</p>
<p>Using ping ponging (switching between developers who writes
tests/production code) we managed to get a good chunk of functionality
complete. Despite this the rest of the iteration was very difficult.
Being unable to talk about design concepts was incredibly frustrating.</p>
<p>The most important concept we took away from here was that more than
likely the developer working with your code tomorrow will not have
worked with you previously. That means any conversations you've had to
explain the code will be lost. The only thing left to communicate will
be your tests or production code. Due to this observation, it is cruicly
we name our tests and code in a manner that is cleary and
understandable, whether six minutes or six months have passed.</p>
<h2>Iteration 4</h2>
<p>Our fourth iteration had a focus on OO concepts. Up until now, our code
had exposed much of the state in various ways. The challenge was to
focus on the messages that are exchanged between objects, rather the
change in state.</p>
<p>This introduced a new problem. How do we test an object without exposing
state? We talked about a couple of methods; mock objects or the <a href="http://c2.com/cgi/wiki?SelfShuntPattern">self
shunt pattern</a>.</p>
<p>Using the shelf shunt pattern was an enjoyable experience - we
identified numerous violations of the <a href="http://www.giorgiosironi.com/2009/09/solid-part-4-interface-segregation.html">interface segregation
principle</a>
as it was actually painful to add to the interface in question. With
mocking frameworks this pain is often lessened due to the dynamic and
often "magic" constructs they employ.</p>
<p>Personally I found code writting using this pattern easier to
understand. The plan will be to adopt this approach for a month or so
and see how it effects day to day development.</p>
<p>Our code looked pretty good at this point, though we were struggling to
replace a conditional statement. After a few minutes the idea seemed
obvious once we recieved a hint -
<a href="http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming">polymorphism</a>.
This sparked a nice discussion about the "<a href="http://www.antiifcampaign.com/">Anti
If</a>" campaign - another point I'm
looking to take further. This iteration proved the most challenging for
the whole team. A second run through allowed further progress.</p>
<h2>Iteration 5</h2>
<p>The final round had us regroup with our original partners. Here we could
use any approach and see how far we could progress. Me and my partner
opted for a failing acceptance test, from here we would implement the
functionality top down until we had the components wired together. This
worked well until we struggled to test how the cells were stored without
exposing any state needlessly. The solution came from some discussion
around <a href="http://www.markhneedham.com/blog/2008/11/06/object-calisthenics-first-thoughts/">object
calesethenics</a>
– first class collections.</p>
<p>One thing to note was how drastically different our code looked, when
compared to the first iteration. During the course of the day we all
noticed a difference in our overall approaches.</p>
<h2>Conclusion</h2>
<p>Overall I believe I speak for the whole team when I say how much we
enjoyed the day. It was refreshing to spend a whole day coding, rather
than being interuppted with other issues. Naturally this was quite
tiring - though left lots energy for discussion afterwards. As a
conclusion it would appear that as a collective we need to spend more
time each week carrying out deliberate practice. For new starters this
is essential training, while for more seasoned developers this is a
useful way to keep our skillset up to date.</p>
  </div><!-- /.entry-content -->
  <footer class="post-info">
    <time class="published" datetime="2012-10-01T00:00:00+02:00">
      Mon 01 October 2012
    </time>
    <address class="vcard author">
      By Shaun Finglas
    </address>
  </footer><!-- /.post-info -->
</section>
        <footer id="contentinfo" class="body">
                <p>Disclaimer: The posts on this site are my own and don't necessarily represent my employers positions, strategies, or opinions.</p>
                <p>Copyright © Shaun Finglas 2019</p><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>