<!DOCTYPE html>
<html lang="english">
<head>
        <meta charset="utf-8" />
        <title>Shaun Finglas - Testing Private Code</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/posts/default.xml" type="application/atom+xml" rel="alternate" title="Shaun Finglas Atom Feed" />

        <link rel="icon" type="image/png" sizes="32x32" href="/theme/images/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/theme/images/favicons/favicon-16x16.png">
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Shaun Finglas</a></h1>
 <h2>Agile software development &amp; programming - one lesson at a time.</h2>                <nav><ul>
                    <li><a href="/pages/about.html">About Me</a></li>
                    <li><a href="/pages/series.html">Series</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2015/05/testing-private-code.html" rel="bookmark"
           title="Permalink to Testing Private Code">Testing Private Code</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-05-01T00:00:00+02:00">
                Published: Fri 01 May 2015
        </abbr>

<p>tags: <a href="/tag/testing.html">testing</a> <a href="/tag/tdd.html">tdd</a> <a href="/tag/unit-testing.html">unit-testing</a> </p>
</footer><!-- /.post-info -->      <p>A common problem many people ask is - should you test private code? In
short, you shouldn't. You should always test the public api of your code
where possible. This is not always easy. Based on the context of the
code in question there are a few options available.</p>
<h5>Don't Test</h5>
<p>Either don't test the private code or rely on manual testing. This will
not be ideal in many cases, but if the code is covered in higher level
tests you may be able to get away with it. If the code will be stable,
short lived or low risk you can default to this option.</p>
<h5>Test via Public Tests</h5>
<p>Simply test the private code by adding assertions or verifications to
exisiting public behaviour tests. If the setup requires a lot of work,
many edge cases or much duplication you may want to avoid this
technique.</p>
<h5>Make the Code Public</h5>
<p>Once public, the code is easily testable. Are we making this code public
just for the sake of an automated test? Yes, but there are valid times
to do this. Providing the behaviour is logically part of the object in
question there is no harm, the single responsibility principle is not
violated.</p>
<p><a href="http://blog.ploeh.dk/2011/02/28/Interfacesareaccessmodifiers/">Interfaces can be used to control visibility
here</a>.
For testing you always use a concrete instance, while your production
code should hold references to interfaces only. To simply hide the
method, don't add it to the interface. For dynamic langauges this is as
simple as "<em>don't invoke it</em>" or relying on naming conventions to
denoate implementation details.</p>
<h5>Make a Public Class</h5>
<p>When single responsibility principle would be violated in the technique
above, this is your other option. <a href="https://blog.shaunfinglas.co.uk/2014/12/stop-making-everything-public.html">Beware the power of just adding a new
class and making it
public</a>.
While it will allow testing in one place, <a href="https://blog.shaunfinglas.co.uk/2014/12/limit-amount-of-dependencies-you-use.html">each public dependency you
introduce further increases
coupling</a>.</p>
<p>If the code that needs testing is a service, the act to introduce a
public object should be considered thoughtfully. Once the class is
pubic, you simply need to verify the use of the class, rather than what
it does. However <a href="https://blog.shaunfinglas.co.uk/2015/02/value-object-refactoring.html">Value Objects can help limit the tests you need to
write</a>
entirely and should be used whenever possible.</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <ul>
                            <li><a href="/feeds/posts/default.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/ShaunFinglas">Twitter</a></li>
                            <li><a href="https://github.com/Finglas">Github</a></li>
                            <li><a href="https://www.linkedin.com/in/shaunfinglas/">LinkedIn</a></li>
                            <li><a href="https://stackoverflow.com/users/102482/finglas">StackOverflow</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>Proudly powered by <a href="http://getpelican.com/">Pelican</a>. Theme based on <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>.</p>
                <p id="disclaimer">Disclaimer: The posts on this site are my own and don't necessarily represent my employers positions, strategies, or opinions.</p>
                <p>Copyright &copy; Shaun Finglas 2017</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-68423049-2', 'auto');
    ga('send', 'pageview');
    </script>
</body>
</html>